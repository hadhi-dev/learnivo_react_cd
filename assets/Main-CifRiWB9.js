import{h as e}from"./vendor-ui-D-W4xDah.js";import{a as m}from"./vendor-react-pOJj_1mY.js";import{y as A}from"./vendor-alerts-CMxmQAUU.js";import{c as L}from"./config-BbshSSl6.js";import{P}from"./PostAPI-Dm7qi3aC.js";import{R as Q,e as J,C as O,X as _,Y as H,T as $,b as K,f as z}from"./vendor-recharts-g12deziw.js";import{B as x,C as B,I as Y,c as X,a as G,T as q,A as Z,H as ee,V as te,R as se}from"./ViewHeaderWithButtons-CEQ1XlOS.js";import{F as ae}from"./vendor-other-a5iLNtiF.js";import"./index-D8Bk1Erc.js";import"./vendor-forms-CxLqLCH9.js";import"./AdminHome-Cjl92l4v.js";import"./CONSTANTS-CNTqIkkT.js";const U={UserRegIDPK:0,FullName:"",Email:"",Qualification:"",Designation:"",ContactNumber:"",WhatsappNumber:"",InternshipDomain:"",JoinedLinkedIn:!1,JoinedWhatsapp:!1,Queries:"",IsVerified:!1,CreatedAt:"",UpdatedAt:""},ie=[{fieldName:"FullName",type:"text",label:"Name",IsVisible:!0,className:"w-full"},{fieldName:"Email",type:"text",label:"Email",IsVisible:!0,className:"w-full"},{fieldName:"ContactNumber",type:"text",label:"Contact",IsVisible:!0,className:"w-1/2"},{fieldName:"InternshipDomain",type:"text",label:"Domain",IsVisible:!0,className:"w-1/2"},{fieldName:"IsVerified",type:"boolean",label:"Onboarded",IsVisible:!0,className:"w-1/2"}],le=[{fieldName:"FullName",type:"text",label:"Full Name",IsVisible:!0,className:"w-1/6"},{fieldName:"Email",type:"text",label:"Email",IsVisible:!0,className:"w-1/6"},{fieldName:"PasswordHash",type:"text",label:"Password Hash",IsVisible:!1},{fieldName:"Qualification",type:"text",label:"Qualification",IsVisible:!0,className:"w-1/6"},{fieldName:"Designation",type:"text",label:"Designation",IsVisible:!0,className:"w-1/6"},{fieldName:"ContactNumber",type:"text",label:"Contact Number",IsVisible:!0,className:"w-1/6"},{fieldName:"WhatsappNumber",type:"text",label:"WhatsApp Number",IsVisible:!0,className:"w-1/6"},{fieldName:"InternshipDomain",type:"text",label:"Internship Domain",IsVisible:!0,className:"w-1/6"},{fieldName:"JoinedLinkedIn",type:"boolean",label:"Joined LinkedIn",IsVisible:!0,className:"w-1/6"},{fieldName:"JoinedWhatsapp",type:"boolean",label:"Joined WhatsApp",IsVisible:!0,className:"w-1/6"},{fieldName:"Queries",type:"text",label:"Queries",IsVisible:!0,className:"w-1/6"},{fieldName:"VerificationToken",type:"text",label:"Verification Token",IsVisible:!1},{fieldName:"IsVerified",type:"boolean",label:"Is Verified",IsVisible:!0,className:"w-1/6"},{fieldName:"UserRole",type:"text",label:"User Role",IsVisible:!0,className:"w-1/6"},{fieldName:"CreatedAt",type:"text",label:"Created At",IsVisible:!0,className:"w-1/6"},{fieldName:"UpdatedAt",type:"text",label:"Updated At",IsVisible:!0,className:"w-1/6"}],M=[{label:"Full Name",fieldName:"FullName",type:"text",className:"w-full md:w-1/2",IsMandatory:1,IsVisible:1,IsDisable:0},{label:"Email",fieldName:"Email",type:"email",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Qualification",fieldName:"Qualification",type:"text",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Designation",fieldName:"Designation",type:"text",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Contact Number",fieldName:"ContactNumber",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Whatsapp Number",fieldName:"WhatsappNumber",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Internship Domain",fieldName:"InternshipDomain",fieldID:"InternshipDomainID",info:"Space",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"LinkedIn",fieldName:"JoinedLinkedIn",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Whatsapp",fieldName:"JoinedWhatsapp",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Queries",fieldName:"Queries",type:"text",className:"w-full",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Onboarded",fieldName:"IsVerified",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0}],re=({data:u=[]})=>{const s=(i=>{const o={};return i.forEach(r=>{const a=r.CreatedTtm||r.CreatedOn||r.DateOfBirth;if(!a)return;const h=String(a).split(" ")[0]||String(a).split("T")[0],l=new Date(h);if(isNaN(l.getTime()))return;const N=l.getFullYear(),g=String(l.getMonth()+1).padStart(2,"0"),I=`${N}-${g}`;o[I]=(o[I]||0)+1}),Object.entries(o).map(([r,a])=>({month:r,users:a})).sort((r,a)=>new Date(r.month)-new Date(a.month))})(u);return s.length===0?e.jsx("div",{className:"h-96 w-full flex items-center justify-center bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-500",children:"No registration data available"})}):e.jsxs("div",{className:"w-full h-96 bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-bold text-gray-900",children:"User Registrations"}),e.jsx(Q,{width:"100%",height:"100%",children:e.jsxs(J,{data:s,margin:{top:20,right:30,left:0,bottom:60},children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(_,{dataKey:"month",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12,fill:"#6b7280"}}),e.jsx(H,{tick:{fontSize:12,fill:"#6b7280"},label:{value:"Number of Users",angle:-90,position:"insideLeft",offset:10}}),e.jsx($,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},formatter:i=>[`${i} users`,"Registrations"],labelFormatter:i=>`Month: ${i}`,cursor:{stroke:"#4f46e5",strokeWidth:2}}),e.jsx(K,{wrapperStyle:{paddingTop:"20px"}}),e.jsx(z,{type:"monotone",dataKey:"users",stroke:"#4f46e5",strokeWidth:4,dot:{fill:"#4f46e5",r:6,strokeWidth:2,stroke:"#ffffff"},activeDot:{r:8,strokeWidth:2,stroke:"#ffffff"},animationDuration:1e3,isAnimationActive:!0,name:"Users"})]})})]})},ne=({handleSubmit:u,clearForm:f,primID:s,formConfig:i,formData:o,handleChange:r,onBack:a,title:h})=>e.jsxs("form",{onSubmit:u,className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("button",{className:"flex items-center rounded-full py-2 text-gray-700 hover:bg-gray-200 focus:outline-none",onClick:()=>a("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"text-md ml-2 pr-2 font-bold text-indigo-600",children:h})]}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 pr-2",children:[s?e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:a,color:"indigo",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:a,color:"red",icon:"close"}),e.jsx(x,{className:"hidden md:flex",name:"Clear",onClick:f,color:"red",icon:"cancel"})]}),e.jsx(x,{className:"hidden md:flex",name:s>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"flex w-full items-center justify-end gap-2 p-2",children:i.map(l=>l.type==="checkbox"&&l.IsVisible?e.jsx(B,{field:l,formData:o,handleChange:r},l.fieldName):"")}),e.jsx("div",{className:"mt-4 flex w-full flex-wrap gap-y-2",children:i.map(l=>l.type!=="checkbox"&&l.IsVisible?e.jsx(Y,{field:l,formData:o,handleChange:r},l.fieldName):null)}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[s?e.jsx(x,{name:"Close",className:"text-lg",onClick:a,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{name:"Close",className:"text-lg",onClick:a,color:"red",icon:"close"}),e.jsx(x,{name:"Clear",className:"text-lg",onClick:f,color:"red",icon:"cancel"})]}),e.jsx(x,{name:s>0?"Update":"Save",icon:"save",type:"submit",color:"indigo"})]})})]}),oe=({handleAdd:u,title:f,refresh:s,TotalCount:i,isFiltered:o})=>e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-md border border-0 border-l-2 pl-2 font-bold transition-colors duration-300 ${o?"border-orange-500 text-orange-600":"border-indigo-600 text-indigo-600"}`,children:[f," (",i||0,")"]}),o&&e.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-orange-100 px-2 py-1",children:[e.jsx(ae,{size:14,className:"text-orange-600"}),e.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Filtered"})]}),e.jsx("i",{title:"Refresh",onClick:s,className:"bi bi-arrow-clockwise cursor-pointer text-indigo-700 hover:text-indigo-900"})]}),e.jsx("div",{children:e.jsx(x,{className:"hidden md:flex",name:"Add",onClick:u,color:"indigo",icon:"add"})})]}),ce=({tableFields:u,cardViewFields:f,dataList:s,handleEdit:i,handleView:o,title:r,isCardView:a,setCardView:h,IDPK:l,refreshData:N,onFilteredCountChange:g})=>{const[I,D]=m.useState(s),[p,S]=m.useState(""),[d,R]=m.useState({startDate:"",endDate:""});m.useEffect(()=>{D(s)},[s]);const C=X(u,i,o,l);let w=I.filter(n=>{if(!p.trim())return!0;const y=p.toLowerCase();return Object.values(n).some(j=>String(j).toLowerCase().includes(y))});(d.startDate||d.endDate)&&(w=w.filter(n=>{const y=n.CreatedTtm||n.UpdatedTtm||n.CreatedOn||n.UpdatedOn||n.DateOfBirth||n.JoiningDate||n.Date;if(!y)return!0;const j=String(y).split(" ")[0]||String(y).split("T")[0],k=new Date(j),t=d.startDate?new Date(d.startDate):null,c=d.endDate?new Date(d.endDate):null;return!(t&&k<t||c&&k>c)}));const v=G(w,l);m.useEffect(()=>{const n=p.trim()||d.startDate||d.endDate;g&&g({filteredCount:w.length,hasActiveFilters:n})},[w.length,p,d,g]);const V=async()=>{try{N&&typeof N=="function"?await N():(console.log("Refreshing RegisterUser table..."),D(s))}catch(n){throw console.error("Refresh error:",n),n}};return e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsx(q,{onRefresh:V,rows:v,columns:C,tableName:"RegisterUser",searchValue:p,onSearchChange:S,dateRange:d,onDateRangeChange:R}),e.jsx(Z,{columns:C,rows:v,storageKey:"registeruser_table_columns"})]})},de=({formConfig:u,formData:f,primID:s,onBack:i,handleEdit:o,handleAdd:r,title:a})=>e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"w-full bg-white",children:[e.jsx(ee,{title:a,onBack:i,handleEdit:o,handleAdd:r,primID:s}),e.jsx(te,{formConfig:u,formData:f}),e.jsx(se,{onBack:i,handleAdd:r,handleEdit:o,primID:s})]})}),T="UserRegIDPK",je=u=>{const[f,s]=m.useState(U),[i,o]=m.useState([]),[r,a]=m.useState("table"),[h,l]=m.useState(0),[N,g]=m.useState(!1),[I,D]=m.useState(0),[p,S]=m.useState(!1);m.useEffect(()=>{d()},[]);const d=async()=>{try{const t=await fetch(`${L.API_URL}userregistrations`);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const c=await t.json();o(c.data),D(c.data.length)}catch(t){console.error("Error fetching data:",t)}},R=t=>{D(t.filteredCount),S(t.hasActiveFilters)},C=t=>{const{name:c,checked:b,type:E}=t.target;if(E==="checkbox")s(F=>({...F,[c]:b}));else{const F=t.target.value;s(W=>({...W,[c]:F}))}},w=async t=>{try{const{status:c,data:b}=await P("userregistration_save",{data:t});c===200&&b.code===200?(A.success(b.message),V(),a("table"),d()):A.warning(b.message)}catch(c){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",c),A.error("something went wrong!")}},v=t=>{t.preventDefault(),w(f)},V=()=>{s(U),l(0)},n=t=>{const c=i.find(b=>b[T]===t);l(t),s(c),a("entry")},y=t=>{const c=i.find(b=>b[T]===t);l(t),s(c),a("view")},j=()=>{V(),a("entry")},k=()=>{switch(r){case"entry":return e.jsx(ne,{title:"Registered_User",primID:h,formData:f,formConfig:M,handleChange:C,handleSubmit:v,clearForm:V,onBack:()=>a("table")});case"view":return e.jsx(de,{title:"Registered_User",primID:h,formConfig:M,formData:f,onBack:()=>a("table"),handleEdit:n,handleAdd:j});case"table":default:return e.jsxs("div",{className:"space-y-4",children:[e.jsx(re,{data:i}),e.jsx(ce,{IDPK:T,cardViewFields:ie,tableFields:le,dataList:i,handleEdit:n,handleView:y,isCardView:N,setCardView:g,refreshData:d,onFilteredCountChange:R})]})}};return e.jsxs("div",{className:"w-screen p-2 md:w-full",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex w-full justify-between space-x-2",children:r==="table"&&e.jsx(oe,{title:"Registered_Users",handleAdd:j,refresh:d,TotalCount:p?I:i.length,isFiltered:p})})}),k()]})};export{je as default};
