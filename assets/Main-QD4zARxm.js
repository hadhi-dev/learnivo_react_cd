import{j as e,r as c,e as L,y as M}from"./index-Dk3PDzU5.js";import{P}from"./PostAPI-DF5irOih.js";import{B as b,C as H,I as _,F as $,c as B,a as z,T as J,A as K,H as W,V as q,R as G}from"./ViewHeaderWithButtons-S-LDBuP1.js";import"./reselect-D_WqcfaR.js";import"./AdminHome-Dus0MgrK.js";import"./search-BH7IYyJi.js";import"./refresh-cw-DYyQ8bvs.js";import"./file-text-CrJzs5T6.js";const E={CourseID:0,UserID:null,CourseName:"",CourseCode:"",Department:"",InstructorName:"",Description:"",StartDate:"",EndDate:"",IsActive:!0,CreatedAt:"",UpdatedAt:"",ShortDescription:"",OfferLetterTitle:"",CertificateTitle:"",Amount:""},Q=[{fieldName:"IsActive",type:"boolean",label:"Active",IsVisible:!0,className:"w-1/2"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-full"},{fieldName:"Department",type:"text",label:"Department",IsVisible:!0,className:"w-full"},{fieldName:"NoOfTask",type:"text",label:"No Of Tasks",IsVisible:!0,className:"w-1/3"},{fieldName:"NoOfEnrolledUsers",type:"text",label:"Interns Enrolled",IsVisible:!0,className:"w-1/3"},{fieldName:"CourseCode",type:"text",label:"Duration",IsVisible:!0,className:"w-1/3"}],X=[{fieldName:"IsActive",type:"boolean",label:"Active",IsVisible:!0,className:"w-1/2"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-1/6"},{fieldName:"CourseCode",type:"text",label:"Course Duration",IsVisible:!0,className:"w-1/6"},{fieldName:"Department",type:"text",label:"Department",IsVisible:!0,className:"w-1/6"},{fieldName:"InstructorName",type:"text",label:"Instructor Name",IsVisible:!0,className:"w-1/6"},{fieldName:"NoOfTask",type:"text",label:"No Of Tasks",IsVisible:!0,className:"w-1/2"},{fieldName:"NoOfEnrolledUsers",type:"text",label:"Interns Enrolled",IsVisible:!0,className:"w-1/2"},{fieldName:"CreatedAt",type:"text",label:"Created At",IsVisible:!0,className:"w-1/6"}],O=[{label:"Course Name",fieldName:"CourseName",type:"text",className:"w-full md:w-2/4",IsMandatory:1,IsVisible:1,IsDisable:0},{label:"Course Duration (in hrs)",fieldName:"CourseCode",type:"number",className:"w-full md:w-1/4",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Course Fee (Amount)",fieldName:"Amount",type:"text",className:"w-full md:w-1/4",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Department",fieldName:"Department",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Instructor Name",fieldName:"InstructorName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Start Date",fieldName:"StartDate",type:"date",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"End Date",fieldName:"EndDate",type:"date",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Description",fieldName:"Description",type:"texteditor",className:"w-full",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Active",fieldName:"IsActive",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Short Description",fieldName:"ShortDescription",type:"text",className:"w-full md:w-2/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Offer Letter Title",fieldName:"OfferLetterTitle",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Certificate Title",fieldName:"CertificateTitle",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0}],Y=({handleSubmit:x,clearForm:m,primID:t,formConfig:i,formData:d,handleChange:u,onBack:n,title:y})=>e.jsxs("form",{onSubmit:x,className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("button",{className:"flex items-center rounded-full py-2 text-gray-700 hover:bg-gray-200 focus:outline-none",onClick:()=>n("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"text-md ml-2 pr-2 font-bold text-indigo-600",children:y})]}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 pr-2",children:[t?e.jsx(b,{className:"hidden md:flex",name:"Close",onClick:n,color:"indigo",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"hidden md:flex",name:"Close",onClick:n,color:"red",icon:"close"}),e.jsx(b,{className:"hidden md:flex",name:"Clear",onClick:m,color:"red",icon:"cancel"})]}),e.jsx(b,{className:"hidden md:flex",name:t>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"flex w-full items-center justify-end gap-2 p-2",children:i.map(l=>l.type==="checkbox"&&l.IsVisible?e.jsx(H,{field:l,formData:d,handleChange:u},l.fieldName):"")}),e.jsx("div",{className:"mt-4 flex w-full flex-wrap gap-y-2",children:i.map(l=>l.type!=="checkbox"&&l.IsVisible?e.jsx(_,{field:l,formData:d,handleChange:u},l.fieldName):null)}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[t?e.jsx(b,{name:"Close",className:"text-lg",onClick:n,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{name:"Close",className:"text-lg",onClick:n,color:"red",icon:"close"}),e.jsx(b,{name:"Clear",className:"text-lg",onClick:m,color:"red",icon:"cancel"})]}),e.jsx(b,{name:t>0?"Update":"Save",icon:"save",type:"submit",color:"indigo"})]})})]}),Z=({handleAdd:x,title:m,refresh:t,TotalCount:i,isFiltered:d})=>e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-md border border-0 border-l-2 pl-2 font-bold transition-colors duration-300 ${d?"border-orange-500 text-orange-600":"border-indigo-600 text-indigo-600"}`,children:[m," (",i||0,")"]}),d&&e.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-orange-100 px-2 py-1",children:[e.jsx($,{size:14,className:"text-orange-600"}),e.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Filtered"})]}),e.jsx("i",{title:"Refresh",onClick:t,className:"bi bi-arrow-clockwise cursor-pointer text-indigo-700 hover:text-indigo-900"})]}),e.jsx("div",{children:e.jsx(b,{className:"hidden md:flex",name:"Add",onClick:x,color:"indigo",icon:"add"})})]}),ee=({tableFields:x,cardViewFields:m,dataList:t,handleEdit:i,handleView:d,title:u,isCardView:n,setCardView:y,IDPK:l,refreshData:I,onFilteredCountChange:C})=>{const[S,D]=c.useState(t),[N,A]=c.useState(""),[o,T]=c.useState({startDate:"",endDate:""});c.useEffect(()=>{D(t)},[t]);const j=B(x,i,d,l);let p=S.filter(a=>{if(!N.trim())return!0;const w=N.toLowerCase();return Object.values(a).some(h=>String(h).toLowerCase().includes(w))});(o.startDate||o.endDate)&&(p=p.filter(a=>{const w=a.CreatedTtm||a.UpdatedTtm||a.CreatedOn||a.UpdatedOn||a.DateOfBirth||a.JoiningDate||a.Date;if(!w)return!0;const h=String(w).split(" ")[0]||String(w).split("T")[0],V=new Date(h),s=o.startDate?new Date(o.startDate):null,r=o.endDate?new Date(o.endDate):null;return!(s&&V<s||r&&V>r)}));const v=z(p,l);c.useEffect(()=>{const a=N.trim()||o.startDate||o.endDate;C&&C({filteredCount:p.length,hasActiveFilters:a})},[p.length,N,o,C]);const g=async()=>{try{I&&typeof I=="function"?await I():(console.log("Refreshing Courses table..."),D(t))}catch(a){throw console.error("Refresh error:",a),a}};return e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsx(J,{onRefresh:g,rows:v,columns:j,tableName:"Courses",searchValue:N,onSearchChange:A,dateRange:o,onDateRangeChange:T}),e.jsx(K,{columns:j,rows:v,storageKey:"courses_table_columns"})]})},se=({formConfig:x,formData:m,primID:t,onBack:i,handleEdit:d,handleAdd:u,title:n})=>e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"w-full bg-white",children:[e.jsx(W,{title:n,onBack:i,handleEdit:d,handleAdd:u,primID:t}),e.jsx(q,{formConfig:x,formData:m}),e.jsx(G,{onBack:i,handleAdd:u,handleEdit:d,primID:t})]})}),F="CourseID",de=x=>{const[m,t]=c.useState(E),[i,d]=c.useState([]),[u,n]=c.useState("table"),[y,l]=c.useState(0),[I,C]=c.useState(!1),[S,D]=c.useState(0),[N,A]=c.useState(!1);c.useEffect(()=>{o()},[]);const o=async()=>{try{const s=await fetch(`${L.API_URL}courses`);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const r=await s.json();d(r.data),D(r.data.length)}catch(s){console.error("Error fetching data:",s)}},T=s=>{D(s.filteredCount),A(s.hasActiveFilters)},j=s=>{const{name:r,checked:f,type:R}=s.target;if(R==="checkbox")t(k=>({...k,[r]:f}));else{const k=s.target.value;t(U=>({...U,[r]:k}))}},p=async s=>{try{const{status:r,data:f}=await P("courses_save",{data:s});r===200&&f.code===200?(M.success(f.message),g(),n("table"),o()):M.warning(f.message)}catch(r){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",r),M.error("something went wrong!")}},v=s=>{s.preventDefault(),p(m)},g=()=>{t(E),l(0)},a=s=>{const r=i.find(f=>f[F]===s);l(s),t(r),n("entry")},w=s=>{const r=i.find(f=>f[F]===s);l(s),t(r),n("view")},h=()=>{g(),n("entry")},V=()=>{switch(u){case"entry":return e.jsx(Y,{title:"Courses",primID:y,formData:m,formConfig:O,handleChange:j,handleSubmit:v,clearForm:g,onBack:()=>n("table")});case"view":return e.jsx(se,{title:"Courses",primID:y,formConfig:O,formData:m,onBack:()=>n("table"),handleEdit:a,handleAdd:h});case"table":default:return e.jsx(ee,{IDPK:F,cardViewFields:Q,tableFields:X,dataList:i,handleEdit:a,handleView:w,isCardView:I,setCardView:C,refreshData:o,onFilteredCountChange:T})}};return e.jsxs("div",{className:"w-screen p-2 md:w-full",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex w-full justify-between space-x-2",children:u==="table"&&e.jsx(Z,{title:"Manage Courses",handleAdd:h,refresh:o,TotalCount:N?S:i.length,isFiltered:N})})}),V()]})};export{de as default};
