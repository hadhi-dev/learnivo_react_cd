import{h as e}from"./vendor-ui-D-W4xDah.js";import{a as c,j as H}from"./vendor-react-pOJj_1mY.js";import{y as E}from"./vendor-alerts-CMxmQAUU.js";import{c as K}from"./config-BbshSSl6.js";import{P as O}from"./PostAPI-Dm7qi3aC.js";import{B as x,C as G,I as B,c as z,a as Q,T as W,A as Z,H as q,V as J,R as X}from"./ViewHeaderWithButtons-CHvg3L_O.js";import{F as Y}from"./vendor-other-BEndW8qv.js";import"./index-9Ntr3LAE.js";import"./vendor-forms-CxLqLCH9.js";import"./AdminHome-CdAUOM1S.js";import"./CONSTANTS-CNTqIkkT.js";import"./vendor-recharts-pV3kltCe.js";const R={UserIDPK:0,UserName:"",UserEmail:"",UserPassword:"",UserContact:"",UserMenuRights:"",IsSuperUser:!1,IsAdmin:!1,IsDefault:!1,IsUserLogin:"",UserGroupID:"",UserGroupName:"",FirstName:"",LastName:"",DateOfBirth:"",Gender:"",Address:"",City:"",State:"",ZipCode:"",Country:"",ProfilePicture:"",LastLoginTime:"",FailedLoginAttempts:"",AccountLocked:"",AccountExpiryDate:"",ResetPasswordToken:"",SecurityQuestion:"",SecurityAnswer:"",IsActive:!0,IsDraft:!1,DeleStat:"",Remarks:"",CreatedUserID:localStorage.getItem("uid"),UpdatedUserID:0,CreatedTtm:"",UpdatedTtm:""},ee=[{fieldName:"UserName",type:"text",label:"User Name",IsVisible:!0,className:"w-full"},{fieldName:"UserEmail",type:"text",label:"Email",IsVisible:!0,className:"w-full"},{fieldName:"UserContact",type:"text",label:"Contact",IsVisible:!0,className:"w-1/2"},{fieldName:"coursesCount",type:"text",label:"Courses Enrolled",IsVisible:!0,className:"w-1/2"},{fieldName:"IsActive",type:"boolean",label:"Is Active",IsVisible:!0}],se=[{fieldName:"IsActive",type:"boolean",label:"Is Active",IsVisible:!0},{fieldName:"UserName",type:"text",label:"User Name",IsVisible:!0,className:"w-full"},{fieldName:"UserEmail",type:"text",label:"Email",IsVisible:!0,className:"w-1/2"},{fieldName:"UserContact",type:"text",label:"Contact",IsVisible:!0,className:"w-1/2"},{fieldName:"coursesCount",type:"text",label:"Courses Enrolled",IsVisible:!0,className:"w-1/2"},{fieldName:"CreatedTtm",type:"text",label:"Created On",IsVisible:!0,className:"w-full"}],M=[{label:"Intern Name",fieldName:"UserName",type:"text",className:"w-full md:w-1/2",IsMandatory:1,IsVisible:1,IsDisable:0},{label:"Intern Email",fieldName:"UserEmail",type:"email",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Contact No.",fieldName:"UserContact",type:"number",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Active",fieldName:"IsActive",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0}],te=({handleSubmit:b,clearForm:m,primID:t,formConfig:l,formData:d,handleChange:u,onBack:n,title:j})=>e.jsxs("form",{onSubmit:b,className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("button",{className:"flex items-center rounded-full py-2 text-gray-700 hover:bg-gray-200 focus:outline-none",onClick:()=>n("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"text-md ml-2 pr-2 font-bold text-indigo-600",children:j})]}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 pr-2",children:[t?e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:n,color:"indigo",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:n,color:"red",icon:"close"}),e.jsx(x,{className:"hidden md:flex",name:"Clear",onClick:m,color:"red",icon:"cancel"})]}),e.jsx(x,{className:"hidden md:flex",name:t>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"flex w-full items-center justify-end gap-2 p-2",children:l.map(a=>a.type==="checkbox"&&a.IsVisible?e.jsx(G,{field:a,formData:d,handleChange:u},a.fieldName):"")}),e.jsx("div",{className:"mt-4 flex w-full flex-wrap gap-y-2",children:l.map(a=>a.type!=="checkbox"&&a.IsVisible?e.jsx(B,{field:a,formData:d,handleChange:u},a.fieldName):null)}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[t?e.jsx(x,{name:"Close",className:"text-lg",onClick:n,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{name:"Close",className:"text-lg",onClick:n,color:"red",icon:"close"}),e.jsx(x,{name:"Clear",className:"text-lg",onClick:m,color:"red",icon:"cancel"})]}),e.jsx(x,{name:t>0?"Update":"Save",icon:"save",type:"submit",color:"indigo"})]})})]}),ae=({handleAdd:b,title:m,refresh:t,TotalCount:l,isFiltered:d})=>e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-md border border-0 border-l-2 pl-2 font-bold transition-colors duration-300 ${d?"border-orange-500 text-orange-600":"border-indigo-600 text-indigo-600"}`,children:[m," ",l?`(${l})`:""]}),d&&e.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-orange-100 px-2 py-1",children:[e.jsx(Y,{size:14,className:"text-orange-600"}),e.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Filtered"})]}),e.jsx("i",{title:"Refresh",onClick:t,className:"bi bi-arrow-clockwise cursor-pointer text-indigo-700 hover:text-indigo-900"})]}),e.jsx("div",{children:e.jsx(x,{className:"hidden md:flex",name:"Add",onClick:b,color:"indigo",icon:"add"})})]}),re=({tableFields:b,cardViewFields:m,dataList:t,handleEdit:l,handleView:d,title:u,isCardView:n,setCardView:j,IDPK:a,refreshData:y,onFilteredCountChange:C})=>{const[S,I]=c.useState(t),[p,A]=c.useState(""),[o,F]=c.useState({startDate:"",endDate:""});c.useEffect(()=>{I(t)},[t]);const v=z(b,l,d,a);let h=S.filter(r=>{if(!p.trim())return!0;const N=p.toLowerCase();return Object.values(r).some(D=>String(D).toLowerCase().includes(N))});(o.startDate||o.endDate)&&(h=h.filter(r=>{const N=r.CreatedTtm||r.UpdatedTtm||r.CreatedOn||r.UpdatedOn||r.CreatedAt||r.created_datetime||r.Date;if(!N)return!0;const D=String(N).split(" ")[0]||String(N).split("T")[0],w=new Date(D),U=o.startDate?new Date(o.startDate):null,V=o.endDate?new Date(o.endDate):null;return!(U&&w<U||V&&w>V)}));const g=Q(h,a);c.useEffect(()=>{const r=p.trim()||o.startDate||o.endDate;C&&C({filteredCount:h.length,hasActiveFilters:r})},[h.length,p,o,C]);const T=async()=>{try{y&&typeof y=="function"?await y():(console.log("Refreshing Users table..."),I(t))}catch(r){throw console.error("Refresh error:",r),r}};return e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsx(W,{onRefresh:T,rows:g,columns:v,tableName:"Users",searchValue:p,onSearchChange:A,dateRange:o,onDateRangeChange:F}),e.jsx(Z,{columns:v,rows:g,storageKey:"users_table_columns"})]})},le=({formConfig:b,formData:m,primID:t,onBack:l,handleEdit:d,handleAdd:u,title:n})=>e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"w-full bg-white",children:[e.jsx(q,{title:n,onBack:l,handleEdit:d,handleAdd:u,primID:t}),e.jsx(J,{formConfig:b,formData:m}),e.jsx(X,{onBack:l,handleAdd:u,handleEdit:d,primID:t})]})}),ne="UserIDPK",Ne=b=>{const[m,t]=c.useState(R),[l,d]=c.useState([]),[u,n]=c.useState("table"),[j,a]=c.useState(0),[y,C]=c.useState(!1),[S,I]=c.useState(0),[p,A]=c.useState(!1),[o,F]=H(),v=parseInt(o.get("per_page"))||1e3,h=parseInt(o.get("page"))||1;c.useEffect(()=>{g()},[v,h]);const g=async()=>{try{const s=await fetch(`${K.API_URL}users?per_page=${v}&page=${h}&username=`);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const i=await s.json();d(i.data),I(i.data.length)}catch(s){console.error("Error fetching data:",s)}},T=s=>{I(s.filteredCount),A(s.hasActiveFilters)},r=s=>{const{name:i,checked:f,type:_}=s.target;if(_==="checkbox")t(k=>({...k,[i]:f}));else{const k=s.target.value;t($=>({...$,[i]:k}))}},N=async s=>{try{const{status:i,data:f}=await O("user_save",{data:s});i===200&&f.code===200?(E.success(f.message),w(),n("table"),g()):E.warning(f.message)}catch(i){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",i),E.error("something went wrong!")}},D=s=>{s.preventDefault(),N(m)},w=()=>{t(R),a(0)},U=s=>{const i=l.find(f=>f.UserIDPK===s);a(s),t(i),n("entry")},V=s=>{console.log("ðŸš€ ~ file: Main.js:92 ~ handleView ~ id:",s);const i=l.find(f=>f.UserIDPK===s);console.log("ðŸš€ ~ file: Main.js:94 ~ handleView ~ foundUser:",i),a(s),t(i),n("view")},P=()=>{w(),n("entry")},L=()=>{switch(u){case"entry":return e.jsx(te,{title:"Intern",primID:j,formData:m,formConfig:M,handleChange:r,handleSubmit:D,clearForm:w,onBack:()=>n("table")});case"view":return e.jsx(le,{title:"Intern",primID:j,formConfig:M,formData:m,onBack:()=>n("table"),handleEdit:U,handleAdd:P});case"table":default:return e.jsx(re,{IDPK:ne,cardViewFields:ee,tableFields:se,dataList:l,handleEdit:U,handleView:V,isCardView:y,setCardView:C,refreshData:g,onFilteredCountChange:T})}};return e.jsxs("div",{className:"w-screen p-2 md:w-full",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex w-full justify-between space-x-2",children:u==="table"&&e.jsx(ae,{TotalCount:p?S:l.length||0,title:"Interns",handleAdd:P,refresh:g,isFiltered:p})})}),L()]})};export{Ne as default};
