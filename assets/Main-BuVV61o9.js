import{h as e}from"./vendor-ui-D-W4xDah.js";import{a as o}from"./vendor-react-pOJj_1mY.js";import{y as A}from"./vendor-alerts-CMxmQAUU.js";import{c as _}from"./config-BbshSSl6.js";import{P as q}from"./PostAPI-Dm7qi3aC.js";import{B as x,C as z,I as B,c as G,a as K,T as W,A as J,H as Q,V as X,R as Y}from"./ViewHeaderWithButtons-CHvg3L_O.js";import{F as Z}from"./vendor-other-BEndW8qv.js";import"./index-9Ntr3LAE.js";import"./vendor-forms-CxLqLCH9.js";import"./AdminHome-CdAUOM1S.js";import"./CONSTANTS-CNTqIkkT.js";import"./vendor-recharts-pV3kltCe.js";const H={CertificateID:0,UserID:null,UUID:"",CourseID:0,Status:"",IsComplete:0,IsPaymentUnderProcess:0,IsPaid:0,IsCertified:0,AmountReceived:"",Remarks:"",PaymentType:"",CertificatePath:"",EnrolledDate:"",PaymentImage:"",TransactionID:""},ee=[{fieldName:"IsPaid",type:"boolean",label:"Paid",IsVisible:!0,className:"w-1/2"},{fieldName:"IsCertified",type:"boolean",label:"Certified",IsVisible:!0,className:"w-1/2"},{fieldName:"UserName",type:"text",label:"Intern Name",IsVisible:!0,className:"w-full"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-1/2"},{fieldName:"EnrolledDate",type:"text",label:"Enrolled Date",IsVisible:!0,className:"w-1/2"}],se=[{fieldName:"CertificatePath",type:"link",label:"Certificate",IsVisible:!0,className:"w-full"},{fieldName:"UserName",type:"text",label:"Intern Name",IsVisible:!0,className:"w-full"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-full"},{fieldName:"IsPaid",type:"boolean",label:"Paid",IsVisible:!0,className:"w-1/2"},{fieldName:"IsComplete",type:"boolean",label:"Complete",IsVisible:!0,className:"w-1/2"},{fieldName:"IsCertified",type:"boolean",label:"Certified",IsVisible:!0,className:"w-1/2"},{fieldName:"AmountReceived",type:"number",label:"Amount Received",IsVisible:!0,className:"w-1/2"},{fieldName:"EnrolledDate",type:"text",label:"Enrolled Date",IsVisible:!0,className:"w-1/2"}],te=[{label:"Course Name",fieldName:"CourseName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"Intern Name",fieldName:"UserName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"UUID",fieldName:"UUID",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"Status",fieldName:"Status",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Is Complete",fieldName:"IsComplete",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Is Payment Under Process",fieldName:"IsPaymentUnderProcess",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Is Paid",fieldName:"IsPaid",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Is Certified",fieldName:"IsCertified",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Amount Received",fieldName:"AmountReceived",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Remarks",fieldName:"Remarks",type:"text",className:"w-full",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Payment Type",fieldName:"PaymentType",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Certificate Path",fieldName:"CertificatePath",type:"text",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Enrolled Date",fieldName:"EnrolledDate",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Payment Image",fieldName:"PaymentImage",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Transaction ID",fieldName:"TransactionID",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0}],ae=({handleSubmit:f,clearForm:c,primID:s,formConfig:n,formData:u,handleChange:d,onBack:a,title:D})=>e.jsxs("form",{onSubmit:f,className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("button",{className:"flex items-center rounded-full py-2 text-gray-700 hover:bg-gray-200 focus:outline-none",onClick:()=>a("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"text-md ml-2 pr-2 font-bold text-indigo-600",children:D})]}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 pr-2",children:[s?e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:a,color:"indigo",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"hidden md:flex",name:"Close",onClick:a,color:"red",icon:"close"}),e.jsx(x,{className:"hidden md:flex",name:"Clear",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(x,{className:"hidden md:flex",name:s>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"flex w-full items-center justify-end gap-2 p-2",children:n.map(t=>t.type==="checkbox"&&t.IsVisible?e.jsx(z,{field:t,formData:u,handleChange:d},t.fieldName):"")}),e.jsx("div",{className:"mt-4 flex w-full flex-wrap gap-y-2",children:n.map(t=>t.type!=="checkbox"&&t.IsVisible?e.jsx(B,{field:t,formData:u,handleChange:d},t.fieldName):null)}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[s?e.jsx(x,{name:"Close",className:"text-lg",onClick:a,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(x,{name:"Close",className:"text-lg",onClick:a,color:"red",icon:"close"}),e.jsx(x,{name:"Clear",className:"text-lg",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(x,{name:s>0?"Update":"Save",icon:"save",type:"submit",color:"indigo"})]})})]}),le=({title:f,refresh:c,TotalCount:s,isFiltered:n})=>e.jsx("div",{className:"flex w-full items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`text-md border border-0 border-l-2 pl-2 font-bold transition-colors duration-300 ${n?"border-orange-500 text-orange-600":"border-indigo-600 text-indigo-600"}`,children:[f," (",s||0,")"]}),n&&e.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-orange-100 px-2 py-1",children:[e.jsx(Z,{size:14,className:"text-orange-600"}),e.jsx("span",{className:"text-xs font-semibold text-orange-600",children:"Filtered"})]}),e.jsx("i",{title:"Refresh",onClick:c,className:"bi bi-arrow-clockwise cursor-pointer text-indigo-700 hover:text-indigo-900"})]})}),ie=({tableFields:f,cardViewFields:c,dataList:s,handleEdit:n,handleView:u,title:d,isCardView:a,setCardView:D,IDPK:t,refreshData:w,onFilteredCountChange:N})=>{const[g,T]=o.useState(s),[p,M]=o.useState(""),[m,R]=o.useState({startDate:"",endDate:""});o.useEffect(()=>{T(s)},[s]);const v=G(f,n,u,t);let h=g.filter(l=>{if(!p.trim())return!0;const y=p.toLowerCase();return Object.values(l).some(V=>String(V).toLowerCase().includes(y))});(m.startDate||m.endDate)&&(h=h.filter(l=>{const y=l.CreatedTtm||l.UpdatedTtm||l.CreatedOn||l.UpdatedOn||l.CreatedAt||l.created_datetime||l.Date;if(!y)return!0;const V=String(y).split(" ")[0]||String(y).split("T")[0],C=new Date(V),P=m.startDate?new Date(m.startDate):null,k=m.endDate?new Date(m.endDate):null;return!(P&&C<P||k&&C>k)}));const I=K(h,t);o.useEffect(()=>{const l=p.trim()||m.startDate||m.endDate;N&&N({filteredCount:h.length,hasActiveFilters:l})},[h.length,p,m,N]);const U=async()=>{try{w&&typeof w=="function"?await w():(console.log("Refreshing Certificates table..."),T(s))}catch(l){throw console.error("Refresh error:",l),l}};return e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx(E,{data:g,courseName:"Presentation Skills"}),e.jsx(E,{data:g,courseName:"Managerial Skills"}),e.jsx(E,{data:g,courseName:"HR Talent Acquisition"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(W,{onRefresh:U,rows:I,columns:v,tableName:"Certificates",searchValue:p,onSearchChange:M,dateRange:m,onDateRangeChange:R}),e.jsx(J,{columns:v,rows:I,storageKey:"certificates_table_columns"})]})]})},E=({data:f,courseName:c})=>{const s=f.filter(a=>a.CourseName===c),n=s.length,u=s.filter(a=>a.IsCertified).length,d=s.filter(a=>!a.IsCertified).length;return e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gradient-to-r from-white to-gray-50 p-3 shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-900 truncate",children:c}),e.jsx("div",{className:"mt-1 h-0.5 w-8 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col items-center px-2 py-1.5 rounded bg-blue-100 border border-blue-200 flex-1",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"TOTAL"}),e.jsx("span",{className:"text-lg font-bold text-blue-700",children:n})]}),e.jsxs("div",{className:"flex flex-col items-center px-2 py-1.5 rounded bg-green-100 border border-green-200 flex-1",children:[e.jsx("span",{className:"text-xs font-semibold text-green-600",children:"CERTIFIED"}),e.jsx("span",{className:"text-lg font-bold text-green-700",children:u})]}),e.jsxs("div",{className:"flex flex-col items-center px-2 py-1.5 rounded bg-yellow-100 border border-yellow-200 flex-1",children:[e.jsx("span",{className:"text-xs font-semibold text-yellow-600",children:"PENDING"}),e.jsx("span",{className:"text-lg font-bold text-yellow-700",children:d})]})]})]})},re=({formConfig:f,formData:c,primID:s,onBack:n,handleEdit:u,handleAdd:d,title:a})=>e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"w-full bg-white",children:[e.jsx(Q,{title:a,onBack:n,handleEdit:u,handleAdd:d,primID:s}),e.jsx(X,{formConfig:f,formData:c}),e.jsx(Y,{onBack:n,handleAdd:d,handleEdit:u,primID:s})]})}),F="CertificateID",Ie=({type:f})=>{const[c,s]=o.useState(H),[n,u]=o.useState(te),[d,a]=o.useState([]),[D,t]=o.useState("table"),[w,N]=o.useState(0),[g,T]=o.useState(!1),[p,M]=o.useState(""),[m,R]=o.useState(0),[v,h]=o.useState(!1);o.useEffect(()=>{I()},[]);const I=async i=>{try{const r=await fetch(`${_.API_URL}coursecertificates`);if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);const S=(await r.json()).data.map(j=>({...j,CertificatePath:`${_.API_URL}certificate/${j.UUID}`}));a(S),M(S.length),R(S.length)}catch(r){console.error("Error fetching data:",r)}},U=i=>{R(i.filteredCount),h(i.hasActiveFilters)},l=i=>{const{name:r,checked:b,type:S}=i.target;if(S==="checkbox")s(j=>({...j,[r]:b}));else{const j=i.target.value;s(O=>({...O,[r]:j}))}},y=async i=>{try{const{status:r,data:b}=await q("coursecertificates_save",{data:i});r===200&&b.code===200?(A.success(b.message),C(),t("table"),I()):A.warning(b.message)}catch(r){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",r),A.error("something went wrong!")}},V=i=>{i.preventDefault(),y(c)},C=()=>{s(H),N(0)},P=i=>{const r=d.find(b=>b[F]===i);N(i),s(r),t("entry")},k=i=>{const r=d.find(b=>b[F]===i);N(i),s(r),t("view")},$=()=>{C(),t("entry")},L=()=>{switch(D){case"entry":return e.jsx(ae,{title:"Certificates",primID:w,formData:c,formConfig:n,handleChange:l,handleSubmit:V,clearForm:C,onBack:()=>t("table")});case"view":return e.jsx(re,{title:"Certificates",primID:w,formConfig:n,formData:c,onBack:()=>t("table"),handleEdit:P,handleAdd:$});case"table":default:return e.jsx(ie,{IDPK:F,cardViewFields:ee,tableFields:se,dataList:d,handleEdit:P,handleView:k,isCardView:g,setCardView:T,refreshData:I,onFilteredCountChange:U})}};return e.jsxs("div",{className:"w-screen p-2 md:w-full",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex w-full justify-between space-x-2",children:D==="table"&&e.jsx(le,{TotalCount:v?m:p,title:"Manage Certificates",refresh:I,isFiltered:v})})}),L()]})};export{Ie as default};
