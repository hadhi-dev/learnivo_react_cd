import{h as e}from"./vendor-ui-D-W4xDah.js";import{a as y}from"./vendor-react-pOJj_1mY.js";import{G as P}from"./GetAPI-C0R9K2iB.js";import{U as A,j as O,b as R,k as $,W as z,T as N,l as K}from"./vendor-other-BEndW8qv.js";import{R as c,A as w,C as h,X as p,Y as u,T as x,a as j,L as k,P as E,b as U,c as C,B as G,d as I}from"./vendor-recharts-pV3kltCe.js";import"./config-BbshSSl6.js";import"./vendor-forms-CxLqLCH9.js";const X=()=>{const[a,S]=y.useState(null);if(y.useEffect(()=>{(async()=>{try{const{data:t}=await P("dashboardAnalytics");S(t)}catch(t){console.error("Error fetching dashboard data:",t)}})()},[]),!a)return e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})});const D=Object.entries(a.users.trend||{}).map(([s,t])=>({month:s,users:t})).sort((s,t)=>s.month.localeCompare(t.month)),T=(a.revenue.trend||[]).map(s=>({month:s.month,earned:Number(s.earned),pending:Number(s.pending),total:Number(s.earned)+Number(s.pending)})).sort((s,t)=>s.month.localeCompare(t.month)),f=Object.entries(a.internshipDomains||{}).map(([s,t])=>({name:s,value:t})),b=Object.entries(a.tasks.byType||{}).map(([s,t])=>({type:s,value:t})),l=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],n=({title:s,value:t,subtitle:d,icon:r,gradient:m,trend:g,trendValue:v})=>e.jsxs("div",{className:`group relative overflow-hidden rounded-lg bg-gradient-to-br ${m} p-3 shadow-md transition-all duration-300 hover:scale-105 hover:shadow-lg md:rounded-xl md:p-4`,children:[e.jsx("div",{className:"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-white/10 blur-xl md:-right-8 md:-top-8 md:h-32 md:w-32"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-white/80 md:text-sm",children:s}),e.jsx("h3",{className:"mt-1 text-xl font-bold text-white md:mt-2 md:text-2xl",children:t}),d&&e.jsx("p",{className:"mt-1 text-xs text-white/70",children:d}),g&&v&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 md:mt-2",children:[g==="up"?e.jsx(K,{className:"h-3 w-3 text-white md:h-4 md:w-4"}):e.jsx(N,{className:"h-3 w-3 text-white md:h-4 md:w-4"}),e.jsx("span",{className:"text-xs font-medium text-white",children:v})]})]}),e.jsx("div",{className:"rounded-lg bg-white/20 p-2 backdrop-blur-sm md:rounded-xl md:p-3",children:e.jsx(r,{className:"h-5 w-5 text-white md:h-6 md:w-6"})})]})})]}),i=({title:s,subtitle:t,children:d,className:r=""})=>e.jsxs("div",{className:`rounded-lg border border-gray-200 bg-white p-3 shadow-md backdrop-blur-sm transition-all duration-300 hover:shadow-lg md:rounded-xl md:p-4 ${r}`,children:[e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-800 md:text-base",children:s}),t&&e.jsx("p",{className:"text-xs text-gray-500",children:t})]}),d]}),o=({active:s,payload:t,label:d})=>s&&t&&t.length?e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3 shadow-lg",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:d}),t.map((r,m)=>e.jsxs("p",{className:"text-sm",style:{color:r.color},children:[r.name,": ",e.jsx("span",{className:"font-bold",children:r.value})]},m))]}):null;return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-2 md:p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 md:text-2xl",children:"Analytics Dashboard"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600 md:text-sm",children:"Overview of users, tasks, revenue, and more ðŸ“Š"})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3 md:gap-4 lg:grid-cols-4",children:[e.jsx(n,{title:"Total Users",value:a.users.total,subtitle:`${a.users.active} active users`,icon:A,gradient:"from-blue-500 to-blue-600",trend:"up",trendValue:`${Math.round(a.users.active/a.users.total*100)}% active`}),e.jsx(n,{title:"Active Interns",value:a.users.active,subtitle:`${a.users.inactive} inactive`,icon:O,gradient:"from-emerald-500 to-green-600"}),e.jsx(n,{title:"Certificates Issued",value:a.certificates.total,subtitle:`${a.certificates.certified} certified`,icon:R,gradient:"from-purple-500 to-purple-600"}),e.jsx(n,{title:"Total Revenue",value:`â‚¹${Number(a.revenue.earned).toLocaleString()}`,subtitle:`â‚¹${a.revenue.pending} pending`,icon:$,gradient:"from-amber-500 to-orange-600",trend:"up",trendValue:"Revenue earned"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:gap-4 lg:grid-cols-2",children:[e.jsx(i,{title:"User Registration Trend",subtitle:"Monthly user signups over time",children:e.jsx(c,{width:"100%",height:280,children:e.jsxs(w,{data:D,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:.1})]})}),e.jsx(h,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(p,{dataKey:"month",tick:{fill:"#6b7280",fontSize:11}}),e.jsx(u,{tick:{fill:"#6b7280",fontSize:11}}),e.jsx(x,{content:e.jsx(o,{})}),e.jsx(j,{type:"monotone",dataKey:"users",stroke:"#6366f1",strokeWidth:2,fillOpacity:1,fill:"url(#colorUsers)"})]})})}),e.jsx(i,{title:"Revenue Trend",subtitle:"Earned vs Pending revenue over time",children:e.jsx(c,{width:"100%",height:280,children:e.jsxs(w,{data:T,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorEarned",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorPending",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:.1})]})]}),e.jsx(h,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(p,{dataKey:"month",tick:{fill:"#6b7280",fontSize:11}}),e.jsx(u,{tick:{fill:"#6b7280",fontSize:11}}),e.jsx(x,{content:e.jsx(o,{})}),e.jsx(k,{wrapperStyle:{fontSize:"12px"}}),e.jsx(j,{type:"monotone",dataKey:"earned",stackId:"1",stroke:"#10b981",strokeWidth:2,fill:"url(#colorEarned)"}),e.jsx(j,{type:"monotone",dataKey:"pending",stackId:"1",stroke:"#f59e0b",strokeWidth:2,fill:"url(#colorPending)"})]})})}),e.jsx(i,{title:"Internship Domains",subtitle:"Distribution of interns by domain",children:e.jsx(c,{width:"100%",height:280,children:e.jsxs(E,{children:[e.jsx(U,{data:f,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:50,outerRadius:90,paddingAngle:5,label:s=>`${s.value}`,children:f.map((s,t)=>e.jsx(C,{fill:l[t%l.length]},`cell-${t}`))}),e.jsx(x,{content:e.jsx(o,{})}),e.jsx(k,{wrapperStyle:{fontSize:"12px"}})]})})}),e.jsx(i,{title:"Task Type Distribution",subtitle:"Breakdown of assignment types",children:e.jsx(c,{width:"100%",height:280,children:e.jsxs(G,{data:b,children:[e.jsx(h,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(p,{dataKey:"type",tick:{fill:"#6b7280",fontSize:11}}),e.jsx(u,{tick:{fill:"#6b7280",fontSize:11}}),e.jsx(x,{content:e.jsx(o,{})}),e.jsx(I,{dataKey:"value",radius:[8,8,0,0],children:b.map((s,t)=>e.jsx(C,{fill:l[t%l.length]},`cell-${t}`))})]})})}),e.jsx(i,{title:"Payment Status",subtitle:"Certificate payment breakdown",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gradient-to-r from-green-500 to-emerald-600 p-4 text-white shadow-md",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium opacity-90 md:text-sm",children:"Verified Payments"}),e.jsx("p",{className:"text-xl font-bold md:text-2xl",children:a.certificates.verifiedPayments})]}),e.jsx(z,{className:"h-8 w-8 opacity-80 md:h-10 md:w-10"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gradient-to-r from-orange-500 to-amber-600 p-4 text-white shadow-md",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium opacity-90 md:text-sm",children:"Pending Payments"}),e.jsx("p",{className:"text-xl font-bold md:text-2xl",children:a.certificates.pendingPayments})]}),e.jsx(N,{className:"h-8 w-8 opacity-80 md:h-10 md:w-10"})]}),e.jsxs("div",{className:"rounded-lg border border-indigo-200 bg-indigo-50 p-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 md:text-sm",children:"Potential Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-indigo-600 md:text-2xl",children:["â‚¹",Number(a.revenue.potential).toLocaleString()]})]})]})}),e.jsx(i,{title:"MCQ Performance",subtitle:"Quiz statistics overview",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-lg bg-blue-50 p-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 md:text-sm",children:"Total Questions"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 md:text-3xl",children:a.mcq.totalQuestions})]}),e.jsxs("div",{className:"rounded-lg bg-purple-50 p-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 md:text-sm",children:"Total Responses"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 md:text-3xl",children:a.mcq.totalResults})]}),e.jsxs("div",{className:"rounded-lg bg-green-50 p-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 md:text-sm",children:"Average Score"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 md:text-3xl",children:a.mcq.avgScore.toFixed(1)})]})]})})]})]})};export{X as default};
